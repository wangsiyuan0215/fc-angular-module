/*!
 * flash-components v1.2.1
 * (c) 2018 LivingSpace.
 */
'use strict';(function(l){if(!l)throw new Error('ReferenceError: please import angular.js@1.X first.');var m=l.version,_major=Number(m.major)||0;if(isNaN(_major))throw new Error('UnknownError: please confirm your angular.js is valid.');if(_major>=2)throw new Error('VersionError: please ensure that the version of angular.js is "1.x.x" .');console.log('fc...loading');l.module('fc.provider',[]).provider('$fc',function $fcProvider(){function __creator(b){return function(a){return{success:b,payload:a}}}function __getOption(a,b){if(l.isUndefined(a))throw new ReferenceError('$fc: __getOption ->'+a+'in context is undefined.');if(l.isUndefined(b))return a;return a[b]}function __setOption(a,b,c){if(l.isUndefined(a))throw new ReferenceError('$fc: __setOption ->'+a+'in context is undefined.');if(l.isUndefined(b))throw new ReferenceError('$fc: __setOption -> param:key is required.');a[b]=c}var e=this,_toast={duration:2000},_validationRegExp={},_httpOptions={headers:{},successCreator:__creator(true),errorCreator:__creator(false),timeout:5000,withCredentials:true};this.http={__getOptions:function(a){return __getOption(_httpOptions,a)},setOptions:function(a){_httpOptions=l.merge(_httpOptions,a)}};l.forEach(_httpOptions,function(b,c){var d=c.slice(0,1).toUpperCase()+c.slice(1),_getName='get'+d,_setName='set'+d;e.http[_getName]=function(){return __getOption(_httpOptions,c)};e.http[_setName]=function(a){return __setOption(_httpOptions,c,a)};if(c==='headers'){e.http[_setName]=function(a){_httpOptions[c]=!!a?l.merge(_httpOptions[c],a):undefined;return false}}});this.toast={__getDuration:function(){return __getOption(_toast,'duration')},setDuration:function(a){return __setOption(_toast,'duration',a)}};this.validation={__getRegExp:function(a){return __getOption(_validationRegExp,a)},setRegExp:function(a,b){return __setOption(_validationRegExp,a,b)}};this.$get=function(){return{http:this.http,toast:this.toast,validation:this.validation}}});l.module('fc.loading',[]).constant('$fcLoadingConfig',{watches:{FC_LOADING:'fcLoading'},subscriptions:{show:'fc.loading.show',hide:'fc.loading.hide'},elements:{DIV:'div',SPAN:'span'},positions:{STATIC:'static',RELATIVE:'relative'},classNames:{container:'fc-loading--container',box:'fc-loading--box',item:'fc-loading--item'}}).service('$fc.loading',['$rootScope','$fcLoadingConfig'].concat(function(a,b){this.show=function(){a.$broadcast(b.subscriptions.show,true)};this.hide=function(){a.$broadcast(b.subscriptions.hide,true)}})).directive('fcLoading',['$fcLoadingConfig'].concat(function(e){var f={};function __createLoadingDom(){var a=document.createElement(e.elements.DIV),$loadingBox=document.createElement(e.elements.DIV),$span=document.createElement(e.elements.SPAN);a.className=e.classNames.container;$loadingBox.className=e.classNames.box;$span.className=e.classNames.item;$loadingBox.appendChild($span);$loadingBox.appendChild($span.cloneNode());a.appendChild($loadingBox);return a}function __appendLoadingDomTo(a,b){var c=window.getComputedStyle(a);if(c.position===e.positions.STATIC){a.style.position=e.positions.RELATIVE}a.appendChild(b);return c}f[e.watches.FC_LOADING]='=';return{restrict:'A',scope:f,link:function(b,c){var d=c[0],$loading=__createLoadingDom(),originStyle=__appendLoadingDomTo(d,$loading);b.$watch(e.watches.FC_LOADING,function(a){if(a){__appendLoadingDomTo(d,$loading)}else{d.style=originStyle;d.removeChild($loading)}})}}})).directive('fcLoading',['$fcLoadingConfig'].concat(function(b){return{restrict:'E',replace:true,template:'<div class="fc-loading" ng-show="loading" fc-loading="true"></div>',link:function(a){a.$on(b.subscriptions.show,function(){a.loading=true});a.$on(b.subscriptions.hide,function(){a.loading=false})}}}));l.module('fc.modal',[]).constant('$fcModalConfig',{subscriptions:{SHOW:'fc.modal.show',HIDE:'fc.modal.hide'},classNames:{bodyHidden:'fc-modal-in-body__show',container:'fc-modal',box:'fc-modal--box',bg:'fc-modal--bg',modalActive:'fc-modal__active',boxActive:'fc-modal--box__active'}}).factory('$fc.modal',['$rootScope','$timeout','$fcModalConfig'].concat(function(c,d,e){var f=null;return{show:function(a,b){if(!a)throw new Error('Error: param \'id\' is required for method show of fcModal in fc.');f&&d.cancel(f);d(function(){c.$broadcast(e.subscriptions.SHOW,{id:a,callback:b})},0)},hide:function(a,b){if(!a)throw new Error('Error: param \'id\' is required for method hide of fcModal in fc.');return function(){f?d.cancel(f):c.$broadcast(e.subscriptions.HIDE,{id:a,callback:b})}}}})).directive('fcModal',['$timeout','$fcModalConfig'].concat(function(i,j){return{restrict:'E',replace:true,transclude:true,scope:false,link:function(c,d,e,f,g){var h=document.body,$__modal=d[0],$__modalBox=d[0].firstChild,__hasHiddenInBody=window.getComputedStyle(h).overflow==='hidden',__id=e.id||null;if(!__id)throw new Error('Error: property \'id\' is required in fc-modal.');if(__id===''||__id===null)throw new Error('Error: property \'id\' is empty in fc-modal.');c._ids=!c._ids?[]:c._ids;if(c._ids.indexOf(__id)!==-1){throw new Error('Error: property \'id\' is unique but '+__id+' is duplicated in fc-modal.');}c._ids.push(__id);g(c,function(a){for(var b=0;b<a.length;b++){if(a[b].nodeType===1){$__modalBox.appendChild(a[b])}}});c.$on(j.subscriptions.SHOW,function(_,a){if(a){if(c._ids.indexOf(a.id)===-1)throw new Error('Error: the modal '+a.id+' for showing is not found.');if(__id===a.id){a&&a.callback&&a.callback();h.className+=__hasHiddenInBody?'':(' '+j.classNames.bodyHidden);$__modal.className+=(' '+j.classNames.modalActive);i(function(){$__modalBox.className+=(' '+j.classNames.boxActive)},200)}}});c.$on(j.subscriptions.HIDE,function(_,a){if(a){if(c._ids.indexOf(a.id)===-1)throw new Error('Error: the modal '+a.id+' for hiding is not found.');if(__id===a.id){$__modalBox.className=$__modalBox.className.replace(new RegExp('\\ '+j.classNames.boxActive,'g'),'');i(function(){$__modal.className=$__modal.className.replace(new RegExp('\\ '+j.classNames.modalActive,'g'),'');h.className=__hasHiddenInBody?h.className:h.replace(new RegExp('\\ '+j.classNames.bodyHidden,'g'),'');a&&a.callback&&a.callback()},200)}}})},template:'<div class="'+j.classNames.container+'">'+'<div class="'+j.classNames.box+'"></div>'+'<div class="'+j.classNames.bg+'"></div>'+'</div>'}}));l.module('fc.toast',['fc.provider']).constant('$fcToastConfig',{delayDuration:0,types:{ERROR:'error',INFO:'info',SUCCESS:'success'},subscriptions:{OPEN:'fc.toast.open',CLOSE:'fc.toast.close'},classNames:{container:'fc-toast',active:'fc-toast__active',types:{info:'fc-toast__info',error:'fc-toast__error',success:'fc-toast__success'},box:'fc-toast--box',content:'fc-toast--content'}}).factory('$fc.toast',['$rootScope','$timeout','$fcToastConfig','$fc'].concat(function(d,e,f,g){var h=null,__duration=g.toast.__getDuration();function __trigger(a,b,c){h&&e.cancel(h);e(function(){d.$broadcast(f.subscriptions.OPEN,{type:a||f.types.ERROR,message:b||'',duration:c||__duration})},f.delayDuration)}function __abort(){h?e.cancel(h):d.$broadcast(f.subscriptions.CLOSE,true)}return{types:f.types,abort:__abort,trigger:__trigger,error:function(a,b){return __trigger(f.types.ERROR,a,b||__duration)},info:function(a,b){return __trigger(f.types.INFO,a,b||__duration)},success:function(a,b){return __trigger(f.types.SUCCESS,a,b||__duration)}}})).directive('fcToast',['$rootScope','$timeout','$fcToastConfig'].concat(function(e,f,g){return{restrict:'E',replace:true,scope:{},link:function(c){var d=null;c.$on(g.subscriptions.OPEN,function(a,b){if(b){c.visible=true;c.message=b.message||'';c.type=b.type||g.types.ERROR;d&&f.cancel(d);d=f(function(){c.visible=false},b.duration)}});c.$on(g.subscriptions.CLOSE,function(a,b){if(b){d&&f.cancel(d);c.visible=false}})},template:'<div class="'+g.classNames.container+'"'+'   ng-class="{ '+'\''+g.classNames.active+'\': visible,'+'\''+g.classNames.types.success+'\': type === \''+g.types.SUCCESS+'\','+'\''+g.classNames.types.error+'\': type === \''+g.types.ERROR+'\','+'\''+g.classNames.types.info+'\': type === \''+g.types.INFO+'\' }">'+'<div class="'+g.classNames.box+'">'+'<div class="'+g.classNames.content+'">{{message}}</div>'+'</div>'+'</div>'}}));l.module('fc.validation',['fc.provider']).config(['$fcProvider',function(a){a.validation.setRegExp('mobile',/0?(13|14|15|17|18|19)[0-9]{9}/);a.validation.setRegExp('bankCardNo',/^([1-9])(\d{15}|\d{18})$/)}]).factory('$fc.validation',['$fc'].concat(function(i){function _setError(a,b){return{isError:!l.isUndefined(a)?a:false,message:a?b:null}}function _getObjectType(a){return Object.prototype.toString.call(a)}return{run:function __validation(d,e,g){var h=_setError();if(!e||!g)return h;if(!l.isArray(e))throw new TypeError('$fc.validation: props must be Array:[prop1, prop2, ...] type.');if(!l.isObject(g)||l.isArray(g))throw new TypeError('$fc.validation: rules must be Object:{ prop: Object } type.');l.forEach([].concat(e).reverse(),function(b){if(typeof b==='string'&&b in g){var c=d,_propPath=b.split('.');l.forEach(_propPath,function(a){if(l.isUndefined(c))return false;c=c[a];});if(l.isUndefined(c))throw new ReferenceError('$fc.validation: context.'+b+' is undefined.');if(g[b].validate){switch(_getObjectType(g[b].validate)){case'[object Function]':if(!g[b].validate(c)){h=_setError(true,l.isArray(g[b].errorMessage)?g[b].errorMessage[0]:g[b].errorMessage);}break;case'[object Array]':if(!l.isArray(g[b].errorMessage))throw new TypeError('$fc.validation: rules.'+b+'.errorMessage should be same with validate:Array in type.');if(g[b].validate.length!==g[b].errorMessage.length)throw new Error('$fc.validation: rules.'+b+'.errorMessage should be same with validate in length.');l.forEach(g[b].validate,function(f,a){if(!l.isFunction(f))throw new TypeError('$fc.validation: rules.'+b+'.validate['+a+'] is not a Function.');if(!f(c))h=_setError(true,g[b].errorMessage[a]);});break;default:throw new TypeError('$fc.validation: [validate] is just allowed to be Function or Array type.');}}if(g[b].isRequired&&(c===''||c===null)){h=_setError(true,g[b].emptyMessage);}}});return h;},regs:i.validation.__getRegExp()};}));l.module('fc.request',['fc.provider']).service('$fc.http',['$http','$q','$fc'].concat(function(h,i,j){var k=['GET','DELETE','HEAD','POST','PUT','PATCH'],_options=j.http.__getOptions();function __http(b,c,d,e,f){var g=null,_optionsNew=l.merge({},_options,e||{});if(k.slice(0,3).indexOf(b.toUpperCase())!==-1){g=h[b.toLowerCase()](c,{params:d||{},headers:_optionsNew.headers,timeout:_optionsNew.timeout,withCredentials:_optionsNew.withCredentials});}else if(k.slice(3).indexOf(b.toUpperCase())!==-1){g=h[b.toLowerCase()](c,d,{headers:_optionsNew.headers,timeout:_optionsNew.timeout,withCredentials:_optionsNew.withCredentials});}return g.then(function(a){return _optionsNew.successCreator(a.data);}).catch(function(a){if(f&&(Date.now()-f>_optionsNew.timeout)){return i.reject(l.merge({},{timeout:true},_optionsNew.errorCreator()));}return i.reject(_optionsNew.errorCreator(a.data||{}));});}this.$get=function(a,b,c){return __http(k[0],a,b,c,Date.now());};this.$delete=function(a,b,c){return __http(k[1],a,b,c,Date.now());};this.$head=function(a,b,c){return __http(k[2],a,b,c,Date.now());};this.$post=function(a,b,c){return __http(k[3],a,b,c,Date.now());};this.$put=function(a,b,c){return __http(k[4],a,b,c,Date.now());};this.$patch=function(a,b,c){return __http(k[5],a,b,c,Date.now());};}));l.module('fc',['fc.provider','fc.loading','fc.modal','fc.toast','fc.validation','fc.request'])})(window.angular);
